# PageCraft: System Architecture

## Architecture Overview

```
+---------------------------------------------------+
|                                                   |
|                  Client                           |
|                                                   |
|  +----------+     +---------+     +----------+    |
|  |  Pages   |---->|  Hooks  |---->|  API     |    |
|  +----------+     +---------+     |  Client  |    |
|       |               |           +----------+    |
|       v               v                |          |
|  +----------+     +---------+          |          |
|  |Components|     |Providers|          |          |
|  +----------+     +---------+          |          |
|                                        |          |
+----------------------------------------|----------+
                                         |
                                         v
+---------------------------------------------------+
|                                                   |
|                  Server                           |
|                                                   |
|  +----------+     +---------+     +----------+    |
|  |  Routes  |---->|  Auth   |---->| Storage  |    |
|  +----------+     +---------+     | Interface|    |
|                                   +----------+    |
|                                        |          |
+----------------------------------------|----------+
                                         |
                                         v
+---------------------------------------------------+
|                                                   |
|              Data Storage                         |
|                                                   |
|  +------------+                                   |
|  | In-Memory  |                                   |
|  | Storage    |                                   |
|  +------------+                                   |
|                                                   |
|  +------------+                                   |
|  | PostgreSQL |  (configured for future use)      |
|  | Database   |                                   |
|  +------------+                                   |
|                                                   |
+---------------------------------------------------+

```

## User Flow Diagram

```
+-------------+     +--------------+     +----------------+
| Registration|---->| Login/Auth   |---->| User Dashboard |
+-------------+     +--------------+     +----------------+
                                               |
                                               |
                                               v
+-------------------+     +-------------------+     +-------------------+
| Browse Bookstore  |     | Author Dashboard  |     | Admin Panel       |
+-------------------+     +-------------------+     +-------------------+
        |                        |                         |
        v                        v                         v
+-------------------+     +-------------------+     +-------------------+
| Cart/Checkout     |     | Manuscript Mgmt   |     | User/Content Mgmt |
+-------------------+     +-------------------+     +-------------------+
        |                        |                         |
        v                        v                         v
+-------------------+     +-------------------+     +-------------------+
| Stripe Payment    |     | Publishing Plans  |     | Platform Settings |
+-------------------+     +-------------------+     +-------------------+
        |                        |                         
        v                        v                        
+-------------------+     +-------------------+     
| Order Tracking    |     | Analytics         |      
+-------------------+     +-------------------+     
```

## Component Relationships

```
+---------------------------------------------------------------------------------+
|                                                                                 |
|  +-------------+     +-------------+     +-------------+     +-------------+    |
|  | pages/      |---->| components/ |---->| hooks/      |---->| lib/        |    |
|  | *.tsx       |     | */          |     | use-*.tsx   |     | *.ts        |    |
|  +-------------+     +-------------+     +-------------+     +-------------+    |
|        |                   |                   |                   |            |
|        v                   v                   v                   v            |
|  +-------------+     +-------------+     +-------------+     +-------------+    |
|  | App.tsx     |---->| providers/  |---->| queryClient |---->| auth.ts     |    |
|  |             |     | *.tsx       |     | .ts         |     | (server)    |    |
|  +-------------+     +-------------+     +-------------+     +-------------+    |
|                                                                |                |
|                                                                v                |
|  +-------------+     +-------------+     +-------------+     +-------------+    |
|  | routes.ts   |---->| storage.ts  |---->| schema.ts   |---->| Database    |    |
|  | (server)    |     | (server)    |     | (shared)    |     | Connection   |    |
|  +-------------+     +-------------+     +-------------+     +-------------+    |
|                                                                                 |
+---------------------------------------------------------------------------------+
```

## Authentication Flow

```
+-------------+       +---------------+       +----------------+
| User        |------>| Login/Register|------>| Authentication |
+-------------+       +---------------+       +----------------+
                                                     |
                                                     v
+----------------+       +---------------+       +----------------+
| Protected      |<------| Session       |<------| JWT/Session    |
| Routes         |       | Management    |       | Token          |
+----------------+       +---------------+       +----------------+
```

## Data Flow

```
+--------------+       +---------------+       +-----------------+
| UI Components|------>| React Hooks   |------>| TanStack Query  |
+--------------+       +---------------+       +-----------------+
                                                       |
                                                       v
+--------------+       +---------------+       +-----------------+
| API Request  |------>| Express Route |------>| Controller Logic|
+--------------+       +---------------+       +-----------------+
                                                       |
                                                       v
+--------------+       +---------------+       +-----------------+
| Storage      |<------| Data         |<------| Response        |
| Interface    |       | Validation   |       | Formatting      |
+--------------+       +---------------+       +-----------------+
```

## Publishing Workflow

```
+-------------+       +----------------+       +-------------------+
| Author      |------>| Select         |------>| Upload/Edit       |
|             |       | Publishing Plan|       | Manuscript        |
+-------------+       +----------------+       +-------------------+
                                                        |
                                                        v
+----------------+       +-------------------+       +-------------------+
| Payment        |<------| Production        |<------| Review and        |
| Processing     |       | Process           |       | Approval          |
+----------------+       +-------------------+       +-------------------+
        |
        v
+----------------+       +-------------------+       +-------------------+
| Distribution   |------>| Sales            |------>| Analytics and      |
| Channels       |       | Tracking         |       | Reporting          |
+----------------+       +-------------------+       +-------------------+
```